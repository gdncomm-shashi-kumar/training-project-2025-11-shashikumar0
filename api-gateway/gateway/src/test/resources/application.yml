server:
  port: 8080

spring:
  application:
    name: gateway-test
  
  # Use H2 in-memory database for tests
  datasource:
    url: jdbc:h2:mem:testdb
    driver-class-name: org.h2.Driver
    username: sa
    password:
  
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: true

# JWT Configuration
jwt:
  secret: test-secret-key-for-jwt-token-validation-must-be-256-bits-long
  access-token-expiration: 900000
  refresh-token-expiration: 2592000000

# Downstream service URLs
services:
  member:
    url: http://localhost:8081
  product:
    url: http://localhost:8082
  cart:
    url: http://localhost:8083

# Rate limiting configuration
rate-limit:
  enabled: false
  default-limit: 300
  per-user: true
  per-ip: false

# CORS configuration
cors:
  allowed-origins:
    - http://localhost:3000
  allowed-methods:
    - GET
    - POST
    - PUT
    - DELETE
  allowed-headers:
    - "*"
  exposed-headers:
    - Authorization
  allow-credentials: true
  max-age: 3600

# Gateway configuration
gateway:
  public-endpoints:
    - /api/v1/auth/login
    - /api/v1/auth/register
    - /api/v1/auth/refresh
    - /health
    - /actuator/**
